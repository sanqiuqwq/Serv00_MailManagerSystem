{% extends "base.html" %}

{% block title %}首页 - {{ site_settings.site_name }}{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-12">
        <div class="jumbotron bg-light p-5 rounded animate__animated animate__fadeIn" data-aos="fade-up">
            <h1 class="display-4 animate__animated animate__slideInDown" data-aos="slide-up">欢迎来到 {{ site_settings.site_name }}</h1>
            <p class="lead animate__animated animate__fadeIn" data-aos="fade-up" data-aos-delay="200">{{ site_settings.site_description }}</p>
            <hr class="my-4 animate__animated animate__fadeIn" data-aos="fade-up" data-aos-delay="300">
            {% if not current_user.is_authenticated %}
            <p class="animate__animated animate__fadeIn" data-aos="fade-up" data-aos-delay="400">注册账户即可获得免费邮箱！</p>
            <div class="animate__animated animate__fadeIn" data-aos="fade-up" data-aos-delay="500">
                <a class="btn btn-primary btn-lg" href="{{ url_for('register') }}" role="button"><i class="fas fa-user-plus me-2"></i>立即注册</a>
                <a class="btn btn-outline-secondary btn-lg ms-2" href="{{ url_for('login') }}" role="button"><i class="fas fa-sign-in-alt me-2"></i>登录</a>
                {% if site_settings.tg_group_url %}
                <a class="btn btn-info btn-lg ms-2" href="{{ site_settings.tg_group_url }}" target="_blank" role="button"><i class="fab fa-telegram-plane me-2"></i> 加入TG交流群</a>
                {% endif %}
            </div>
            {% else %}
            <p class="animate__animated animate__fadeIn" data-aos="fade-up" data-aos-delay="400">去用户中心创建邮箱！</p>
            <div class="animate__animated animate__fadeIn" data-aos="fade-up" data-aos-delay="500">
                <a class="btn btn-primary btn-lg" href="{{ url_for('dashboard') }}" role="button"><i class="fas fa-user-cog me-2"></i>用户中心</a>
                {% if site_settings.purchase_code_url %}
                <a class="btn btn-success btn-lg ms-2" href="{{ site_settings.purchase_code_url }}" target="_blank" role="button"><i class="fas fa-shopping-cart me-2"></i>购买卡密</a>
                {% endif %}
                {% if site_settings.tg_group_url %}
                <a class="btn btn-info btn-lg ms-2" href="{{ site_settings.tg_group_url }}" target="_blank" role="button"><i class="fab fa-telegram-plane me-2"></i> 加入TG交流群</a>
                {% endif %}
            </div>
            {% endif %}
        </div>
    </div>
</div>

{% if announcements %}
<div class="row mt-5" data-aos="fade-up">
    <div class="col-md-12">
        <h2 class="animate__animated animate__slideInDown"><i class="fas fa-bullhorn me-2"></i>公告</h2>
        {% for announcement in announcements %}
        <div class="card mb-3 animate__animated animate__fadeIn" data-aos="fade-up" data-aos-delay="{{ loop.index * 100 }}">
            <div class="card-header bg-info text-white">
                {{ announcement.title }}
                <small class="float-end">{{ announcement.created_at.strftime('%Y-%m-%d %H:%M') }}</small>
            </div>
            <div class="card-body">
                <p class="card-text">{{ announcement.content }}</p>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}
{% endblock %}
